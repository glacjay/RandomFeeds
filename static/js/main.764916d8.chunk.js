(this["webpackJsonprandom-feeds"]=this["webpackJsonprandom-feeds"]||[]).push([[0],{13:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(18),c=n(6),i=n(40),s=n.n(i),u=n(41),l=n.n(u),d=s.a.create({baseURL:"https://fever.glacjay.info",timeout:3e4,headers:{Accept:"application/json; charset=UTF-8"}}),p={};p.request=function(){var e=Object(c.a)(r.a.mark((function e(t,n,a,c){var i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=Object(o.a)({},a),e.next=4,d[t](n,"post"===t?l.a.stringify(i):{params:i});case 4:if(s=e.sent.data,!1!==(null===c||void 0===c?void 0:c.log)&&console.log(t.toUpperCase(),n,a,s),null===s||void 0===s?void 0:s.auth){e.next=8;break}throw new Error("auth failed");case 8:return e.abrupt("return",s);case 11:throw e.prev=11,e.t0=e.catch(0),console.warn(t.toUpperCase(),n,a,e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),p.get=function(){var e=Object(c.a)(r.a.mark((function e(t,n,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.request("get",t,n,a));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),p.post=function(){var e=Object(c.a)(r.a.mark((function e(t,n,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.request("post",t,n,a));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),t.a=p},43:function(e,t,n){e.exports=n(80)},54:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),o=n(6),c=n(17),i=n.n(c),s=n(1),u=n(12),l=n(4),d=n(0),p=n.n(d),f=n(14),m=n(5),v=n(13),b=n(8);t.default=Object(u.a)((function(e){var t,n=Object(b.c)().persisted.token,a=(e.match.params||{}).groupId,c=Object(l.d)((function(){return{items:[]}}));return p.a.useEffect((function(){(function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,o,i,u,l,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,v.a.post("?api&unread_item_ids",{api_key:n});case 5:for(a=e.sent,o=null===(t=a.unread_item_ids)||void 0===t?void 0:t.split(","),i=[],u=0;u<7;++u)l=parseInt(Math.random()*o.length),i.push(o[l]),o.splice(l,1);return e.next=11,v.a.post("?api&items",{api_key:n,with_ids:i.join(",")});case 11:d=e.sent.items,s.q((function(){c.items=d})),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.warn("GroupPage.loadFeeds error:",e.t0),Object(m.c)("failed to load feeds: ".concat(e.t0));case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}})()()}),[n,a,c]),p.a.createElement("div",{className:"flex-column"},null===(t=c.items)||void 0===t?void 0:t.map((function(e){return p.a.createElement(f.b,{key:e.id,to:"/Item/".concat(e.id),style:{margin:8,border:"1px solid black",padding:16}},p.a.createElement("div",null,e.title),p.a.createElement("div",{className:"flex-row align-center",style:{marginTop:8,justifyContent:"space-between",fontSize:12,color:"gray"}},p.a.createElement("div",null,e.author),p.a.createElement("div",null,i()(1e3*e.created_on_time).format("YYYY-MM-DD HH:mm"))))})))}))},74:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),o=n(6),c=n(17),i=n.n(c),s=n(1),u=n(12),l=n(4),d=n(0),p=n.n(d),f=n(5),m=n(13),v=n(8);t.default=Object(u.a)((function(e){var t,n,a,c,u,d=Object(v.c)().persisted.token,b=(e.match.params||{}).itemId,g=Object(l.d)((function(){return{item:null}}));p.a.useEffect((function(){(function(){var e=Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,d){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,m.a.post("?api&items",{api_key:d,with_ids:b});case 5:t=e.sent.items,s.q((function(){g.item=t[0]})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.warn("GroupPage.loadFeeds error:",e.t0),Object(f.c)("failed to load feeds: ".concat(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[d,b,g]);var h=function(){var t=Object(o.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.post("?api",{api_key:d,mark:"item",as:"read",id:null===(n=g.item)||void 0===n?void 0:n.id});case 3:e.history.goBack(),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.warn("ItemPage.markAsRead error:",t.t0),Object(f.c)("mark item as read failed: ".concat(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}();return p.a.createElement("div",{className:"flex-column"},p.a.createElement("a",{href:null===(t=g.item)||void 0===t?void 0:t.url,target:"_blank",rel:"noopener noreferrer",className:"flex-column",style:{background:"lightgray",padding:8}},p.a.createElement("div",{style:{fontWeight:"bold"}},null===(n=g.item)||void 0===n?void 0:n.title),p.a.createElement("div",{className:"flex-row align-center",style:{marginTop:8,justifyContent:"space-between",fontSize:12,color:"gray"}},p.a.createElement("div",null,null===(a=g.item)||void 0===a?void 0:a.author),p.a.createElement("div",null,i()(1e3*(null===(c=g.item)||void 0===c?void 0:c.created_on_time)).format("YYYY-MM-DD HH:mm")))),p.a.createElement("div",{dangerouslySetInnerHTML:{__html:null===(u=g.item)||void 0===u?void 0:u.html},style:{maxWidth:"100vw"}}),p.a.createElement("div",{className:"flex-row",style:{position:"fixed",bottom:0,left:0,right:0,zIndex:7,height:50}},p.a.createElement("button",{onClick:h,style:{flex:1}},"mark as read"),p.a.createElement("button",{onClick:function(){return e.history.goBack()},style:{flex:1}},"return")))}))},75:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),o=n(42),c=n.n(o),i=n(1),s=n(12),u=n(4),l=n(0),d=n.n(l),p=n(5),f=n(13),m=n(8);t.default=Object(s.a)((function(e){var t,n,a=Object(m.c)(),o=Object(u.d)((function(){return{account:null,password:null,isSubmitting:!1,login:r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o.isSubmitting=!0,n=c()("".concat(o.account,":").concat(o.password)),t.next=5,f.a.post("?api",{api_key:n});case 5:if(t.sent.auth){t.next=9;break}return Object(p.c)("auth failed"),t.abrupt("return");case 9:return a.setToken(n),t.next=12,localStorage.setItem("token",n);case 12:e.history.goBack(),t.next=17;break;case 15:t.prev=15,t.t0=t.catch(0);case 17:return t.prev=17,o.isSubmitting=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,15,17,20]])}))}}));return d.a.createElement("div",{style:{margin:16,display:"grid",gridTemplateColumns:"auto 1fr",rowGap:16,columnGap:16}},d.a.createElement("div",null,"account"),d.a.createElement("input",{value:null!==(t=o.account)&&void 0!==t?t:"",onChange:i.f((function(e){return o.account=e.target.value||null}))}),d.a.createElement("div",null,"password"),d.a.createElement("input",{value:null!==(n=o.password)&&void 0!==n?n:"",onChange:i.f((function(e){return o.password=e.target.value||null}))}),d.a.createElement("button",{onClick:o.login,disabled:o.isSubmitting,style:{gridColumn:"1 / span 2",padding:8,fontSize:14}},"login"))}))},78:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),o=n(6),c=n(1),i=n(12),s=n(4),u=n(0),l=n.n(u),d=n(14),p=n(5),f=n(13),m=n(8);t.default=Object(i.a)((function(e){var t,n=Object(m.c)().persisted.token,a=Object(s.d)((function(){return{groups:[]}}));return l.a.useEffect((function(){(function(){var e=Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,f.a.post("?api&groups",{api_key:n});case 5:t=e.sent,c.q((function(){a.groups=t.groups})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.warn("IndexPage.loadGroups error:",e.t0),Object(p.c)("failed to load groups: ".concat(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[n,a]),n?l.a.createElement("div",{className:"flex-column"},null===(t=a.groups)||void 0===t?void 0:t.map((function(e){return l.a.createElement(d.b,{key:e.id,to:"/Group/".concat(e.id),style:{margin:8,border:"1px solid black",padding:16}},e.title)}))):l.a.createElement(d.b,{to:"/Login",style:{padding:16}},"login")}))},79:function(e,t,n){},8:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l}));var a=n(37),r=n(38),o=n(1),c=n(0),i=n.n(c),s=function(){function e(){Object(a.a)(this,e),this.persisted={isLoaded:!1,token:null},o.m(this)}return Object(r.a)(e,[{key:"setPersisted",value:function(e){this.persisted=e}},{key:"setToken",value:function(e){this.persisted.token=e}}]),e}(),u=i.a.createContext(null);function l(){return i.a.useContext(u)}},80:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),c=n.n(o),i=n(8),s=n(2),u=n.n(s),l=n(18),d=n(6),p=n(1),f=n(12),m=n(14),v=n(3),b=n(5),g=(n(49),Object(f.a)((function(){var e=Object(i.c)();e.persisted.token;return r.a.useEffect((function(){(function(){var t=Object(d.a)(u.a.mark((function t(){var n,a,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=null,t.next=4,localStorage.getItem("globalStore");case 4:return a=t.sent,console.log("xxx load persisted",a),a&&(n=JSON.parse(a)),e.setPersisted(Object(l.a)({},n,{isLoaded:!0})),t.next=10,localStorage.getItem("token");case 10:r=t.sent,e.setToken(r),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),console.warn("App.loadPersisted error:",t.t0),Object(b.c)("\u52a0\u8f7d\u79bb\u7ebf\u5b58\u50a8\u51fa\u9519\uff1a".concat(t.t0));case 18:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}})()()}),[e]),r.a.useEffect((function(){return p.p((function(){return e.persisted}),function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("xxx reaction",p.r(t)),!(null===t||void 0===t?void 0:t.isLoaded)){e.next=4;break}return e.next=4,localStorage.setItem("globalStore",JSON.stringify(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),r.a.createElement(a.Fragment,null,r.a.createElement(b.a,{autoClose:4e3,closeButton:!1,transition:Object(b.b)({enter:"slideInDown",exit:"slideOutUp",duration:300}),hideProgressBar:!0,toastClassName:"toast-border",bodyClassName:"toast-body"}),r.a.createElement(m.a,null,r.a.createElement(v.c,null,r.a.createElement(v.a,{path:"/Group/:groupId",component:n(54).default}),r.a.createElement(v.a,{path:"/Item/:itemId",component:n(74).default}),r.a.createElement(v.a,{path:"/Login",component:n(75).default}),r.a.createElement(v.a,{path:"/",component:n(78).default}))))})));n(79),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.b.Provider,{value:new i.a},r.a.createElement(g,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.764916d8.chunk.js.map