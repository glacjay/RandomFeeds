{"version":3,"sources":["utils/api2.js","RootStore.js","pages/FolderPage.js","pages/ItemPage.js","pages/LoginPage.js","pages/IndexPage.js","App.js","serviceWorker.js","index.js"],"names":["api2","api","axios","create","baseURL","timeout","request","a","method","url","args","options","actualArgs","headers","token","Authorization","data","qs","stringify","params","result","log","console","toUpperCase","warn","get","post","RootStore","folders","randomItems","mobx","this","account","password","Email","Passwd","json","split","filter","l","forEach","line","idx","indexOf","substr","Auth","Error","localStorage","setItem","toast","tags","tag","test","id","folderId","reloadItems","reloadRandomItems","loadFolders","folder","find","f","items","length","getItem","itemsStr","JSON","parse","output","s","xt","r","n","itemRefs","randomItemsStr","indics","Array","from","Set","fill","map","parseInt","Math","random","join","item","itemId","i","removeItem","field","some","markItemAsRead","loadItems","RootStoreContext","React","createContext","useRootStore","useContext","observer","props","rootStore","location","search","slice","useEffect","useState","isSubmitting","setIsSubmitting","className","key","to","style","margin","border","padding","title","marginTop","justifyContent","fontSize","color","origin","dayjs","updated","format","height","position","bottom","left","right","zIndex","onClick","disabled","flex","markFolderAsRead","href","canonical","target","rel","background","fontWeight","dangerouslySetInnerHTML","__html","summary","content","maxWidth","history","goBack","state","setState","display","gridTemplateColumns","rowGap","columnGap","value","onChange","e","login","gridColumn","loadToken","autoClose","closeButton","transition","cssTransition","enter","exit","duration","hideProgressBar","toastClassName","bodyClassName","basename","path","component","require","default","Boolean","window","hostname","match","ReactDOM","render","StrictMode","Provider","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.9575c4f8.chunk.js","sourcesContent":["import axios from 'axios';\nimport qs from 'qs';\n\nconst api2 = {};\n\nlet api = axios.create({\n  baseURL: 'https://fever.glacjay.info',\n  timeout: 30000,\n});\n\napi2.request = async (method, url, args, options) => {\n  try {\n    const actualArgs = {\n      ...args,\n    };\n    const headers = {\n      ...(api2.token ? { Authorization: `GoogleLogin auth=${api2.token}` } : {}),\n    };\n    const result = (\n      await api.request({\n        method,\n        url,\n        ...(method === 'post' ? { data: qs.stringify(actualArgs) } : { params: actualArgs }),\n        headers,\n      })\n    ).data;\n    if (options?.log !== false) {\n      console.log(method.toUpperCase(), url, args, result);\n    }\n    return result;\n  } catch (error) {\n    console.warn(method.toUpperCase(), url, args, error);\n    throw error;\n  }\n};\n\napi2.get = async (url, args, options) => {\n  return api2.request('get', url, args, options);\n};\napi2.post = async (url, args, options) => {\n  return api2.request('post', url, args, options);\n};\n\nexport default api2;\n","import * as mobx from 'mobx';\nimport React from 'react';\nimport { toast } from 'react-toastify';\nimport api2 from 'src/utils/api2';\n\nexport default class RootStore {\n  token = null;\n\n  folders = null;\n  randomItems = null;\n\n  constructor() {\n    mobx.makeAutoObservable(this);\n  }\n\n  loadToken(token) {\n    this.token = token;\n    api2.token = token;\n  }\n\n  *login(account, password) {\n    try {\n      const result = yield api2.post('/accounts/ClientLogin', { Email: account, Passwd: password });\n      const json = {};\n      result\n        .split('\\n')\n        .filter((l) => l)\n        .forEach((line) => {\n          const idx = line.indexOf('=');\n          if (idx > 0) {\n            json[line.substr(0, idx)] = line.substr(idx + 1);\n          } else {\n            json[line] = true;\n          }\n        });\n      if (!json.Auth) {\n        throw new Error('account or password incorrect');\n      }\n\n      this.token = json.Auth;\n      yield localStorage.setItem('token', this.token);\n      api2.token = this.token;\n      return true;\n    } catch (ex) {\n      console.warn('RootStore.login error:', ex);\n      toast(`login failed: ${ex}`);\n      return false;\n    }\n  }\n\n  *loadFolders() {\n    try {\n      if (!this.token) {\n        return;\n      }\n\n      const result = yield api2.get('/reader/api/0/tag/list?output=json');\n      this.folders = result.tags.filter((tag) => /\\/label\\//.test(tag.id));\n    } catch (ex) {\n      console.warn('RootStore.loadFolders error:', ex);\n      toast(`load folders error: ${ex}`);\n    }\n  }\n\n  *loadItems({ folderId, reloadItems, reloadRandomItems }) {\n    try {\n      if (!this.token || !folderId) {\n        return;\n      }\n      if (!this.folders) {\n        yield this.loadFolders();\n      }\n      const folder = this.folders?.find((f) => f.id === folderId);\n      if (!folder) {\n        return;\n      }\n\n      if (reloadItems) {\n        folder.items = null;\n      }\n      if (reloadItems || reloadRandomItems) {\n        folder.randomItems = null;\n      }\n\n      let { items } = folder;\n      if (!(items?.length > 0) && !reloadItems) {\n        const itemsStr = yield localStorage.getItem('items:' + folderId);\n        if (itemsStr) {\n          items = JSON.parse(itemsStr);\n          folder.items = items;\n        }\n      }\n      if (!(items?.length > 0) || reloadItems) {\n        items = (yield api2.get('/reader/api/0/stream/items/ids', {\n          output: 'json',\n          s: folderId,\n          xt: 'user/-/state/com.google/read',\n          r: 'o',\n          n: 10000,\n        })).itemRefs;\n        folder.items = items;\n        yield localStorage.setItem('items:' + folderId, JSON.stringify(items));\n      }\n\n      let { randomItems } = folder;\n      if (!(randomItems?.length > 0) && !reloadRandomItems) {\n        const randomItemsStr = yield localStorage.getItem('randomItems:' + folderId);\n        if (randomItemsStr) {\n          randomItems = JSON.parse(randomItemsStr);\n          folder.randomItems = randomItems;\n        }\n      }\n      if (!(randomItems?.length > 0) || reloadItems || reloadRandomItems) {\n        const indics = Array.from(\n          new Set(\n            Array(7)\n              .fill()\n              .map(() => parseInt(Math.random() * items.length)),\n          ),\n        );\n        randomItems = (yield api2.get(\n          `/reader/api/0/stream/items/contents?output=json${indics\n            .map((idx) => `&i=${items[idx].id}`)\n            .join('')}`,\n        )).items.map((item, idx) => ({ ...item, id: items[idx].id }));\n        folder.randomItems = randomItems;\n        yield localStorage.setItem('randomItems:' + folderId, JSON.stringify(randomItems));\n      }\n      this.randomItems = randomItems;\n    } catch (ex) {\n      console.warn('RootStore.loadItems error:', ex);\n      toast(`load items error: ${ex}`);\n    }\n  }\n\n  *markItemAsRead(itemId) {\n    try {\n      if (!this.token || !itemId) {\n        return false;\n      }\n\n      yield api2.post('/reader/api/0/edit-tag', { i: itemId, a: 'user/-/state/com.google/read' });\n\n      yield this.removeItem(itemId, 'items');\n      yield this.removeItem(itemId, 'randomItems');\n\n      this.randomItems = this.randomItems?.filter((item) => item.id !== itemId);\n      return true;\n    } catch (ex) {\n      console.warn('RootStore.markItemAsRead error:', ex);\n      toast(`mark item as read error: ${ex}`);\n      return false;\n    }\n  }\n\n  *removeItem(itemId, field) {\n    for (const folder of this.folders || []) {\n      if (folder[field]?.some((item) => item.id === itemId)) {\n        folder[field] = folder[field].filter((item) => item.id !== itemId);\n        yield localStorage.setItem(`${field}:${folder.id}`, JSON.stringify(folder[field]));\n      }\n    }\n  }\n\n  *markFolderAsRead(folderId) {\n    const folder = this.folders.find((f) => f.id === folderId);\n    if (folder) {\n      for (const item of folder.randomItems || []) {\n        yield this.markItemAsRead(item.id);\n      }\n      yield this.loadItems({ folderId });\n    }\n  }\n}\n\nexport const RootStoreContext = React.createContext(null);\n\nexport function useRootStore() {\n  return React.useContext(RootStoreContext);\n}\n","import dayjs from 'dayjs';\nimport { observer } from 'mobx-react';\nimport qs from 'qs';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useRootStore } from 'src/RootStore';\n\nexport default observer(function GroupPage(props) {\n  const rootStore = useRootStore();\n\n  const query = qs.parse(props.location.search.slice(1));\n  const { id: folderId } = query;\n  const folder = rootStore.folders?.find((folder) => folder.id === folderId);\n\n  React.useEffect(() => {\n    rootStore.loadItems({ folderId });\n  }, [rootStore, rootStore.token, folderId]);\n\n  const [isSubmitting, setIsSubmitting] = React.useState(false);\n\n  return (\n    <div className=\"flex-column\">\n      {folder?.randomItems?.map((item) => (\n        <Link\n          key={item.id}\n          to={`/Item?id=${item.id}`}\n          style={{ margin: 8, border: '1px solid black', padding: 16 }}\n        >\n          <div>{item.title}</div>\n          <div\n            className=\"flex-row align-center\"\n            style={{ marginTop: 8, justifyContent: 'space-between', fontSize: 12, color: 'gray' }}\n          >\n            <div>{item.origin.title}</div>\n            <div>{dayjs(item.updated * 1000).format('YYYY-MM-DD HH:mm')}</div>\n          </div>\n        </Link>\n      ))}\n\n      <div style={{ height: 50 }} />\n      <div\n        className=\"flex-row\"\n        style={{ position: 'fixed', bottom: 0, left: 0, right: 0, zIndex: 7, height: 50 }}\n      >\n        <button\n          onClick={() => {\n            setIsSubmitting(true);\n            rootStore.loadItems({ folderId, reloadItems: true });\n            setIsSubmitting(false);\n          }}\n          disabled={isSubmitting}\n          style={{ flex: 1 }}\n        >\n          reload folder items\n        </button>\n        <button\n          onClick={async () => {\n            setIsSubmitting(true);\n            rootStore.markFolderAsRead(folderId);\n            setIsSubmitting(false);\n          }}\n          disabled={isSubmitting}\n          style={{ flex: 1 }}\n        >\n          mark them as read\n        </button>\n        <button\n          onClick={() => {\n            setIsSubmitting(true);\n            rootStore.loadItems({ folderId, reloadRandomItems: true });\n            setIsSubmitting(false);\n          }}\n          disabled={isSubmitting}\n          style={{ flex: 1 }}\n        >\n          reload random items\n        </button>\n      </div>\n    </div>\n  );\n});\n","import dayjs from 'dayjs';\nimport { observer } from 'mobx-react';\nimport qs from 'qs';\nimport React from 'react';\nimport { useRootStore } from 'src/RootStore';\n\nexport default observer(function ItemPage(props) {\n  const rootStore = useRootStore();\n\n  const query = qs.parse(props.location.search.slice(1));\n  const { id: itemId } = query;\n  const item = rootStore.randomItems?.find((item) => item.id === itemId);\n\n  const [isSubmitting, setIsSubmitting] = React.useState(false);\n\n  return (\n    <div className=\"flex-column\">\n      <a\n        href={item?.canonical?.[0]?.href}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"flex-column\"\n        style={{\n          background: 'lightgray',\n          padding: 8,\n        }}\n      >\n        <div style={{ fontWeight: 'bold' }}>{item?.title}</div>\n        <div\n          className=\"flex-row align-center\"\n          style={{ marginTop: 8, justifyContent: 'space-between', fontSize: 12, color: 'gray' }}\n        >\n          <div>{item?.origin?.title}</div>\n          <div>{dayjs(item?.updated * 1000).format('YYYY-MM-DD HH:mm')}</div>\n        </div>\n      </a>\n\n      <div\n        dangerouslySetInnerHTML={{ __html: item?.summary?.content }}\n        style={{ maxWidth: '100vw' }}\n      />\n\n      <div style={{ height: 50 }} />\n      <div\n        className=\"flex-row\"\n        style={{ position: 'fixed', bottom: 0, left: 0, right: 0, zIndex: 7, height: 50 }}\n      >\n        <button\n          onClick={async () => {\n            setIsSubmitting(true);\n            if (await rootStore.markItemAsRead(item?.id)) {\n              props.history.goBack();\n            }\n            setIsSubmitting(false);\n          }}\n          disabled={isSubmitting}\n          style={{ flex: 1 }}\n        >\n          mark as read\n        </button>\n        <button onClick={() => props.history.goBack()} disabled={isSubmitting} style={{ flex: 1 }}>\n          return\n        </button>\n      </div>\n    </div>\n  );\n});\n","import { observer } from 'mobx-react';\nimport React from 'react';\nimport { useRootStore } from 'src/RootStore';\n\nexport default observer(function LoginPage(props) {\n  const rootStore = useRootStore();\n\n  const [state, setState] = React.useState({\n    account: null,\n    password: null,\n    isSubmitting: false,\n  });\n\n  return (\n    <div\n      style={{\n        margin: 16,\n        display: 'grid',\n        gridTemplateColumns: 'auto 1fr',\n        rowGap: 16,\n        columnGap: 16,\n      }}\n    >\n      <div>account</div>\n      <input\n        value={state.account ?? ''}\n        onChange={(e) => setState({ ...state, account: e.target.value || null })}\n      />\n\n      <div>password</div>\n      <input\n        value={state.password ?? ''}\n        onChange={(e) => setState({ ...state, password: e.target.value || null })}\n      />\n\n      <button\n        onClick={async () => {\n          setState({ ...state, isSubmitting: true });\n          if (await rootStore.login(state.account, state.password)) {\n            props.history.goBack();\n          }\n          setState({ ...state, isSubmitting: false });\n        }}\n        disabled={state.isSubmitting}\n        style={{ gridColumn: '1 / span 2', padding: 8, fontSize: 14 }}\n      >\n        login\n      </button>\n    </div>\n  );\n});\n","import { observer } from 'mobx-react';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useRootStore } from 'src/RootStore';\n\nexport default observer(function IndexPage(props) {\n  const rootStore = useRootStore();\n\n  React.useEffect(() => {\n    rootStore.loadFolders();\n  }, [rootStore, rootStore.token]);\n\n  if (!rootStore.token) {\n    return (\n      <Link to=\"/Login\" style={{ margin: 8, border: '1px solid black', padding: 16 }}>\n        login\n      </Link>\n    );\n  }\n\n  return (\n    <div className=\"flex-column\">\n      {rootStore.folders?.map((folder) => (\n        <Link\n          key={folder.id}\n          to={`/Folder?id=${folder.id}`}\n          style={{ margin: 8, border: '1px solid black', padding: 16 }}\n        >\n          {folder.id}\n        </Link>\n      ))}\n    </div>\n  );\n});\n","import { observer } from 'mobx-react';\nimport React from 'react';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport { cssTransition, ToastContainer } from 'react-toastify';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport { useRootStore } from 'src/RootStore';\n\nexport default observer(function App() {\n  const rootStore = useRootStore();\n\n  React.useEffect(() => {\n    const loadToken = async () => {\n      try {\n        const token = await localStorage.getItem('token');\n        rootStore.loadToken(token);\n      } catch (ex) {\n        console.warn('App.loadToken error:', ex);\n        toast(`load storage error: ${ex}`);\n      }\n    };\n    loadToken();\n  }, [rootStore]);\n\n  return (\n    <div>\n      <ToastContainer\n        autoClose={4000}\n        closeButton={false}\n        transition={cssTransition({\n          enter: 'slideInDown',\n          exit: 'slideOutUp',\n          duration: 300,\n        })}\n        hideProgressBar\n        toastClassName=\"toast-border\"\n        bodyClassName=\"toast-body\"\n      />\n\n      <BrowserRouter basename=\"/random-feeds\">\n        <Switch>\n          <Route path=\"/Folder\" component={require('src/pages/FolderPage').default} />\n          <Route path=\"/Item\" component={require('src/pages/ItemPage').default} />\n\n          <Route path=\"/Login\" component={require('src/pages/LoginPage').default} />\n          <Route path=\"/\" component={require('src/pages/IndexPage').default} />\n        </Switch>\n      </BrowserRouter>\n    </div>\n  );\n});\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport RootStore, { RootStoreContext } from 'src/RootStore';\nimport App from './App';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <RootStoreContext.Provider value={new RootStore()}>\n      <App />\n    </RootStoreContext.Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}